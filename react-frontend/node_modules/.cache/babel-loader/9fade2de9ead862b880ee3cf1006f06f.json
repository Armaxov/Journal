{"ast":null,"code":"import _classCallCheck from\"C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import GroupService from'../services/GroupService';import StudentService from'../services/StudentService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateStudentComponent=/*#__PURE__*/function(_Component){_inherits(CreateStudentComponent,_Component);var _super=_createSuper(CreateStudentComponent);function CreateStudentComponent(props){var _this;_classCallCheck(this,CreateStudentComponent);_this=_super.call(this,props);_this.saveOrUpdateStudent=function(e){e.preventDefault();var student={firstName:_this.state.firstName,lastName:_this.state.lastName,groupId:_this.state.groupId};if(_this.state.id==-1){StudentService.createStudent(student).then(function(res){_this.props.history.push(\"/students\");});}else{StudentService.updateStudent(student,_this.state.id).then(function(res){_this.props.history.push(\"/students\");});}};_this.changeFirstNameHandler=function(event){_this.setState({firstName:event.target.value});};_this.changeLastNameHandler=function(event){_this.setState({lastName:event.target.value});};_this.changeGroupHandler=function(event){var newId=_this.getGroupIdByName(event.target.value);_this.setState({groupId:newId});};_this.state={id:_this.props.match.params.id,firstName:'',lastName:'',groupId:'',groups:[]};_this.changeFirstNameHandler=_this.changeFirstNameHandler.bind(_assertThisInitialized(_this));_this.changeLastNameHandler=_this.changeLastNameHandler.bind(_assertThisInitialized(_this));_this.changeGroupHandler=_this.changeGroupHandler.bind(_assertThisInitialized(_this));return _this;}_createClass(CreateStudentComponent,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;GroupService.getGroups().then(function(res){_this2.setState({groups:res.data,groupId:res.data[0].id});});if(this.state.id==-1){return;}else{StudentService.getStudentsById(this.state.id).then(function(res){var student=res.data;_this2.setState({firstName:student.firstName,lastName:student.lastName,groupId:student.groupId});});}}},{key:\"getTitle\",value:function getTitle(){if(this.state.id==-1){return/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u043E\\u0433\\u043E \\u0441\\u0442\\u0443\\u0434\\u0435\\u043D\\u0442\\u0430\"});}else{return/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043E\\u0431 \\u0441\\u0442\\u0443\\u0434\\u0435\\u043D\\u0442\\u0435\"});}}},{key:\"cancel\",value:function cancel(){this.props.history.push('/students');}},{key:\"getGroupIdByName\",value:function getGroupIdByName(name){var currentGroup='';this.state.groups.forEach(function(group){if(group.groupName==name){currentGroup=group.id;}});return currentGroup;}},{key:\"getGroupList\",value:function getGroupList(){var groups=[];this.state.groups.forEach(function(group){groups.push(/*#__PURE__*/_jsx(\"option\",{value:group.groupName,children:group.groupName},group.id));});return groups;}},{key:\"deleteStudent\",value:function deleteStudent(){this.props.history.push(\"/students\");StudentService.deleteStudent(this.state.id);window.location.reload();}},{key:\"getDeleteButton\",value:function getDeleteButton(){var _this3=this;if(this.state.id!=-1){return/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:\"10px\"},onClick:function onClick(){_this3.deleteStudent();},className:\"btn btn-danger\",children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card col-md-6 offset-md-3 offset-md-3\",children:[this.getTitle(),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u0418\\u043C\\u044F\",name:\"firstName\",className:\"form-control\",value:this.state.firstName,onChange:this.changeFirstNameHandler}),/*#__PURE__*/_jsx(\"label\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\",name:\"lastName\",className:\"form-control\",value:this.state.lastName,onChange:this.changeLastNameHandler}),/*#__PURE__*/_jsx(\"label\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0413\\u0440\\u0443\\u043F\\u043F\\u0430\"}),/*#__PURE__*/_jsx(\"select\",{name:\"group\",className:\"form-control\",onChange:this.changeGroupHandler,children:this.getGroupList()}),/*#__PURE__*/_jsx(\"label\",{})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:this.saveOrUpdateStudent,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:this.cancel.bind(this),style:{marginLeft:\"10px\"},children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),this.getDeleteButton()]})})]})})})});}}]);return CreateStudentComponent;}(Component);export default CreateStudentComponent;","map":{"version":3,"sources":["C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/src/components/CreateStudentComponent.jsx"],"names":["React","Component","GroupService","StudentService","CreateStudentComponent","props","saveOrUpdateStudent","e","preventDefault","student","firstName","state","lastName","groupId","id","createStudent","then","res","history","push","updateStudent","changeFirstNameHandler","event","setState","target","value","changeLastNameHandler","changeGroupHandler","newId","getGroupIdByName","match","params","groups","bind","getGroups","data","getStudentsById","name","currentGroup","forEach","group","groupName","deleteStudent","window","location","reload","marginLeft","getTitle","getGroupList","cancel","getDeleteButton"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport GroupService from '../services/GroupService';\r\nimport StudentService from '../services/StudentService';\r\n\r\nclass CreateStudentComponent extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            id: this.props.match.params.id,\r\n            firstName: '',\r\n            lastName: '',\r\n            groupId: '',\r\n            groups: []\r\n        }\r\n\r\n\r\n        this.changeFirstNameHandler = this.changeFirstNameHandler.bind(this);\r\n        this.changeLastNameHandler = this.changeLastNameHandler.bind(this);\r\n        this.changeGroupHandler = this.changeGroupHandler.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        GroupService.getGroups().then(res => {\r\n            this.setState({groups: res.data,\r\n                groupId: res.data[0].id});\r\n        });\r\n\r\n        if(this.state.id == -1){\r\n            return\r\n        }\r\n        else{\r\n            StudentService.getStudentsById(this.state.id).then((res) => {\r\n                let student = res.data;\r\n                this.setState({\r\n                    firstName: student.firstName,\r\n                    lastName: student.lastName,\r\n                    groupId: student.groupId\r\n                });\r\n            });\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    saveOrUpdateStudent = e =>{\r\n        e.preventDefault();\r\n        let student = {\r\n            firstName: this.state.firstName, \r\n            lastName: this.state.lastName, \r\n            groupId: this.state.groupId}\r\n        if(this.state.id == -1){\r\n            StudentService.createStudent(student).then(res =>{\r\n                this.props.history.push(\"/students\");\r\n            });\r\n        }\r\n        else{\r\n            StudentService.updateStudent(student, this.state.id).then(res => {\r\n                this.props.history.push(\"/students\");\r\n            });\r\n        }\r\n    }\r\n\r\n    changeFirstNameHandler = (event) =>{\r\n        this.setState({firstName: event.target.value});\r\n    }\r\n\r\n    changeLastNameHandler = (event) =>{\r\n        this.setState({lastName: event.target.value});\r\n    }\r\n\r\n    changeGroupHandler = (event) =>{\r\n        let newId = this.getGroupIdByName(event.target.value);\r\n        this.setState({groupId: newId});\r\n    }\r\n\r\n    getTitle(){\r\n        if(this.state.id == -1){\r\n            return <h3 className=\"text-center\">Добавить нового студента</h3>\r\n        }\r\n        else{\r\n            return <h3 className=\"text-center\">Обновить данные об студенте</h3>\r\n        } \r\n    }\r\n\r\n    cancel(){\r\n        this.props.history.push('/students');\r\n    }\r\n\r\n    getGroupIdByName(name){\r\n        let currentGroup = '';\r\n        this.state.groups.forEach((group) => {\r\n            if(group.groupName == name){\r\n                currentGroup = group.id;\r\n            }\r\n        });\r\n        return currentGroup;\r\n    }\r\n\r\n    getGroupList(){\r\n        let groups = [];\r\n        this.state.groups.forEach((group) => {\r\n            groups.push(<option key={group.id} value={group.groupName}>{group.groupName}</option>);\r\n        });\r\n        return groups;\r\n    }\r\n\r\n    deleteStudent(){\r\n        this.props.history.push(\"/students\");\r\n        StudentService.deleteStudent(this.state.id);\r\n        window.location.reload();\r\n    }\r\n\r\n    getDeleteButton(){\r\n        if(this.state.id != -1){\r\n            return  <button style = {{marginLeft:\"10px\"}} onClick={() => {this.deleteStudent()}} className=\"btn btn-danger\">Удалить</button>\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"card col-md-6 offset-md-3 offset-md-3\">\r\n                            {this.getTitle()}\r\n                            <div className=\"card-body\">\r\n                                <form>\r\n                                    <div className=\"form-group\">\r\n                                        <label>Имя</label>\r\n                                        <input placeholder=\"Имя\" name=\"firstName\" className=\"form-control\"\r\n                                        value={this.state.firstName} onChange={this.changeFirstNameHandler}/>\r\n                                        <label></label>\r\n                                    </div>\r\n\r\n                                    <div className=\"form-group\">\r\n                                        <label>Фамилия</label>\r\n                                        <input placeholder=\"Фамилия\" name=\"lastName\" className=\"form-control\"\r\n                                        value={this.state.lastName} onChange={this.changeLastNameHandler}/>\r\n                                        <label></label>\r\n                                    </div>\r\n\r\n\r\n                                    <div className=\"form-group\">\r\n                                        <label>Группа</label>\r\n                                        <select name=\"group\" className=\"form-control\" onChange={this.changeGroupHandler}>\r\n                                            {this.getGroupList()}\r\n                                        </select>\r\n                                        <label></label>\r\n                                    </div>\r\n\r\n                                    <button className=\"btn btn-success\" onClick={this.saveOrUpdateStudent}>Сохранить</button>\r\n                                    <button className=\"btn btn-danger\" onClick={this.cancel.bind(this)} style={{marginLeft: \"10px\"}}>Отмена</button>\r\n                                    {this.getDeleteButton()}\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default CreateStudentComponent;"]},"metadata":{},"sourceType":"module"}