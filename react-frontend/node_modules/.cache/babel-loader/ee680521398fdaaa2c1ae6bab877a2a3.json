{"ast":null,"code":"import _classCallCheck from\"C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import GroupService from'../services/GroupService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateGroupComponent=/*#__PURE__*/function(_Component){_inherits(CreateGroupComponent,_Component);var _super=_createSuper(CreateGroupComponent);function CreateGroupComponent(props){var _this;_classCallCheck(this,CreateGroupComponent);_this=_super.call(this,props);_this.hangeTypeHandler=function(event){_this.setState({groupType:event.target.groupType});};_this.changeGroupHandler=function(event){_this.setState({groupName:event.target.value});};_this.saveOrUpdateGroup=function(e){e.preventDefault();var group={groupName:_this.state.groupName,groupType:_this.state.groupType,groupYear:_this.state.year};if(_this.state.groupId==-1){GroupService.createGroup(group).then(function(res){_this.props.history.push(\"/groups\");});}else{GroupService.updateGroup(group,_this.state.groupId).then(function(res){_this.props.history.push(\"/groups\");});}};_this.changeTypeHandler=function(event){_this.setState({groupType:event.target.value});};_this.changeYearHandler=function(event){_this.setState({year:event.target.value});};_this.state={groupId:_this.props.match.params.id,groupName:'',year:''};_this.saveOrUpdateGroup=_this.saveOrUpdateGroup.bind(_assertThisInitialized(_this));_this.changeGroupHandler=_this.changeGroupHandler.bind(_assertThisInitialized(_this));_this.changeYearHandler=_this.changeYearHandler.bind(_assertThisInitialized(_this));return _this;}_createClass(CreateGroupComponent,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var id=this.state.groupId;if(id==-1){return;}else{GroupService.getGroupById(id).then(function(res){var group=res.data;_this2.setState({groupName:group.groupName,year:group.groupYear,groupType:group.groupType});});}}},{key:\"getTitle\",value:function getTitle(){if(this.state.groupId==-1){return/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u0443\\u044E \\u0433\\u0440\\u0443\\u043F\\u043F\\u0443\"});}else{return/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0433\\u0440\\u0443\\u043F\\u043F\\u0443\"});}}},{key:\"cancel\",value:function cancel(){this.props.history.push('/groups');}},{key:\"deleteGroup\",value:function deleteGroup(){this.props.history.push(\"/groups\");GroupService.deleteGroup(this.state.groupId);window.location.reload();}},{key:\"getDeleteButton\",value:function getDeleteButton(){var _this3=this;if(this.state.groupId!=-1){return/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:\"10px\"},onClick:function onClick(){_this3.deleteGroup();},className:\"btn btn-danger\",children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card col-md-6 offset-md-3 offset-md-3\",children:[this.getTitle(),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0413\\u0440\\u0443\\u043F\\u043F\\u0430\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u0413\\u0440\\u0443\\u043F\\u043F\\u0430\",name:\"group\",className:\"form-control\",value:this.state.groupName,onChange:this.changeGroupHandler}),/*#__PURE__*/_jsx(\"label\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0413\\u043E\\u0434 \\u043F\\u043E\\u0441\\u0442\\u0443\\u043F\\u043B\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\",name:\"year\",className:\"form-control\",value:this.state.year,onChange:this.changeYearHandler}),/*#__PURE__*/_jsx(\"label\",{})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:this.saveOrUpdateGroup,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:this.cancel.bind(this),style:{marginLeft:\"10px\"},children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),this.getDeleteButton()]})})]})})})});}}]);return CreateGroupComponent;}(Component);export default CreateGroupComponent;","map":{"version":3,"sources":["C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/src/components/CreateGroupComponent.jsx"],"names":["React","Component","GroupService","CreateGroupComponent","props","hangeTypeHandler","event","setState","groupType","target","changeGroupHandler","groupName","value","saveOrUpdateGroup","e","preventDefault","group","state","groupYear","year","groupId","createGroup","then","res","history","push","updateGroup","changeTypeHandler","changeYearHandler","match","params","id","bind","getGroupById","data","deleteGroup","window","location","reload","marginLeft","getTitle","cancel","getDeleteButton"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport GroupService from '../services/GroupService';\r\n\r\nclass CreateGroupComponent extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            groupId:this.props.match.params.id,\r\n            groupName:'',\r\n            year:''\r\n        }\r\n\r\n        this.saveOrUpdateGroup = this.saveOrUpdateGroup.bind(this);\r\n        this.changeGroupHandler = this.changeGroupHandler.bind(this);\r\n        this.changeYearHandler = this.changeYearHandler.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        let id = this.state.groupId;\r\n        if(id == -1){\r\n            return\r\n        }\r\n        else{\r\n            GroupService.getGroupById(id).then((res) => {\r\n                let group = res.data;\r\n                this.setState({\r\n                    groupName: group.groupName,\r\n                    year: group.groupYear,\r\n                    groupType: group.groupType\r\n                });\r\n            });\r\n\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    getTitle(){\r\n        if(this.state.groupId == -1){\r\n            return <h3 className=\"text-center\">Добавить новую группу</h3>\r\n        }\r\n        else{\r\n            return <h3 className=\"text-center\">Изменить группу</h3>\r\n        } \r\n    }\r\n\r\n    hangeTypeHandler = (event) =>{\r\n        this.setState({groupType: event.target.groupType});\r\n    }\r\n\r\n    changeGroupHandler = (event) =>{\r\n        this.setState({groupName: event.target.value});\r\n    }\r\n\r\n    cancel(){\r\n        this.props.history.push('/groups');\r\n    }\r\n\r\n    saveOrUpdateGroup = e =>{\r\n        e.preventDefault();\r\n        let group = { \r\n            groupName: this.state.groupName,\r\n            groupType: this.state.groupType,\r\n            groupYear: this.state.year\r\n        }\r\n        if(this.state.groupId == -1){\r\n            GroupService.createGroup(group).then(res =>{\r\n                this.props.history.push(\"/groups\");\r\n            });\r\n        }\r\n        else{\r\n            GroupService.updateGroup(group, this.state.groupId).then(res => {\r\n                this.props.history.push(\"/groups\");\r\n            });\r\n        }\r\n    }\r\n\r\n    changeTypeHandler = (event) =>{\r\n        this.setState({groupType: event.target.value});\r\n    }\r\n\r\n    changeYearHandler = (event) =>{\r\n        this.setState({year: event.target.value});\r\n    }\r\n\r\n    deleteGroup(){\r\n        this.props.history.push(\"/groups\");\r\n        GroupService.deleteGroup(this.state.groupId);\r\n        window.location.reload();\r\n    }\r\n\r\n    getDeleteButton(){\r\n        if(this.state.groupId != -1){\r\n            return  <button style = {{marginLeft:\"10px\"}} onClick={() => {this.deleteGroup()}} className=\"btn btn-danger\">Удалить</button>\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"card col-md-6 offset-md-3 offset-md-3\">\r\n                            {this.getTitle()}\r\n                            <div className=\"card-body\">\r\n                            <form>\r\n                                    <div className=\"form-group\">\r\n                                        <label>Группа</label>\r\n                                        <input placeholder=\"Группа\" name=\"group\" className=\"form-control\"\r\n                                        value={this.state.groupName} onChange={this.changeGroupHandler}/>\r\n                                        <label></label>\r\n                                    </div>\r\n\r\n                                    <div className=\"form-group\">\r\n                                        <label>Год поступления</label>\r\n                                        <input placeholder=\"\" name=\"year\" className=\"form-control\"\r\n                                        value={this.state.year} onChange={this.changeYearHandler}/>\r\n                                        <label></label>\r\n                                    </div>\r\n\r\n                                    <button className=\"btn btn-success\" onClick={this.saveOrUpdateGroup}>Сохранить</button>\r\n                                    <button className=\"btn btn-danger\" onClick={this.cancel.bind(this)} style={{marginLeft: \"10px\"}}>Отмена</button>\r\n                                    {this.getDeleteButton()}\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default CreateGroupComponent;"]},"metadata":{},"sourceType":"module"}