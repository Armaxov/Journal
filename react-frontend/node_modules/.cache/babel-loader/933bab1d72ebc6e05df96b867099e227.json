{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Arslan\\\\eclipse-workspace\\\\Journal\\\\react-frontend\\\\src\\\\components\\\\HeaderComponent.jsx\";\nimport React, { Component } from 'react';\nimport AuthenticationService from '../services/AuthenticationService';\nimport { Link } from \"react-router-dom\";\nimport UserService from '../services/UserService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass HeaderComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userId: '',\n      currentRole: ''\n    };\n  }\n\n  async componentDidMount() {\n    AuthenticationService.checkToken().then(res => {\n      if (res == 401 && AuthenticationService.isUserLoggedIn()) {\n        localStorage.removeItem(\"token\");\n        let conf = window.confirm(\"Время вашей сессий истекло, хотите перезайти?\");\n\n        if (conf) {\n          window.open(\"/login\");\n        } else {\n          window.location.reload();\n        }\n      }\n    });\n\n    if (AuthenticationService.isUserLoggedIn()) {\n      let username = '';\n      let getUsernameByTokenRequest = await AuthenticationService.getUsernameByToken();\n      username = getUsernameByTokenRequest.data;\n      let userId = '';\n      let getIdByUsernamerRequest = await UserService.getIdByUsername(username);\n      userId = getIdByUsernamerRequest.data;\n      this.setState({\n        userId: userId\n      });\n    }\n\n    UserService.getCurrentUserRole().then(res => {\n      this.setState({\n        currentRole: res.data\n      });\n    });\n  }\n\n  isHaveFullAccess(userId) {\n    if (userId == '') return false;\n    if (userId != '' && this.state.currentRole == \"admin\") return true;else return false;\n  }\n\n  logoutLink() {\n    if (AuthenticationService.isUserLoggedIn()) return /*#__PURE__*/_jsxDEV(\"li\", {\n      style: {\n        marginLeft: \"10px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        id: \"headerLink\",\n        to: \"/logout\",\n        children: \"\\u0412\\u044B\\u0439\\u0442\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 48\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 16\n    }, this);\n  }\n\n  loginLink() {\n    if (!AuthenticationService.isUserLoggedIn()) return /*#__PURE__*/_jsxDEV(\"li\", {\n      style: {\n        marginLeft: \"10px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        id: \"headerLink\",\n        to: \"/login\",\n        children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 48\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 16\n    }, this);\n  }\n\n  createUserLink() {\n    console.log(this.state.userId);\n    if (AuthenticationService.isUserLoggedIn() && this.isHaveFullAccess(this.state.userId)) return /*#__PURE__*/_jsxDEV(\"li\", {\n      style: {\n        marginLeft: \"10px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        id: \"headerLink\",\n        to: \"/add-user/-1\",\n        children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 48\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 16\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"header\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"navbar navgab-expand-lg navbar-dark bg-success\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"navbar-inner\",\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"navbar-brand\",\n                href: \"/\",\n                children: \"\\u041E\\u043D\\u043B\\u0430\\u0439\\u043D \\u0436\\u0443\\u0440\\u043D\\u0430\\u043B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"nav\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"active\",\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  id: \"headerLink\",\n                  to: \"/students\",\n                  children: \"\\u0421\\u0442\\u0443\\u0434\\u0435\\u043D\\u0442\\u044B\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 52\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                style: {\n                  marginLeft: \"10px\"\n                },\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  id: \"headerLink\",\n                  to: \"/groups\",\n                  children: \"\\u0413\\u0440\\u0443\\u043F\\u043F\\u044B\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 86,\n                  columnNumber: 61\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                style: {\n                  marginLeft: \"10px\"\n                },\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  id: \"headerLink\",\n                  to: \"/journals\",\n                  children: \"\\u0416\\u0443\\u0440\\u043D\\u0430\\u043B\\u044B\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 61\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 29\n              }, this), this.createUserLink(), this.loginLink(), this.logoutLink(), /*#__PURE__*/_jsxDEV(\"li\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default HeaderComponent;","map":{"version":3,"sources":["C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/src/components/HeaderComponent.jsx"],"names":["React","Component","AuthenticationService","Link","UserService","HeaderComponent","constructor","props","state","userId","currentRole","componentDidMount","checkToken","then","res","isUserLoggedIn","localStorage","removeItem","conf","window","confirm","open","location","reload","username","getUsernameByTokenRequest","getUsernameByToken","data","getIdByUsernamerRequest","getIdByUsername","setState","getCurrentUserRole","isHaveFullAccess","logoutLink","marginLeft","loginLink","createUserLink","console","log","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,qBAAP,MAAkC,mCAAlC;AACA,SACIC,IADJ,QAES,kBAFT;AAGA,OAAOC,WAAP,MAAwB,yBAAxB;;;AAEA,MAAMC,eAAN,SAA8BJ,SAA9B,CAAwC;AACpCK,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACTC,MAAAA,MAAM,EAAE,EADC;AAETC,MAAAA,WAAW,EAAE;AAFJ,KAAb;AAKH;;AAEsB,QAAjBC,iBAAiB,GAAE;AACrBT,IAAAA,qBAAqB,CAACU,UAAtB,GAAmCC,IAAnC,CAAwCC,GAAG,IAAI;AAC3C,UAAGA,GAAG,IAAI,GAAP,IAAcZ,qBAAqB,CAACa,cAAtB,EAAjB,EAAwD;AACpDC,QAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACA,YAAIC,IAAI,GAAGC,MAAM,CAACC,OAAP,CAAe,+CAAf,CAAX;;AACA,YAAGF,IAAH,EAAQ;AACJC,UAAAA,MAAM,CAACE,IAAP,CAAY,QAAZ;AACH,SAFD,MAGI;AACAF,UAAAA,MAAM,CAACG,QAAP,CAAgBC,MAAhB;AACH;AACJ;AACJ,KAXD;;AAcA,QAAGrB,qBAAqB,CAACa,cAAtB,EAAH,EAA0C;AACtC,UAAIS,QAAQ,GAAG,EAAf;AACA,UAAIC,yBAAyB,GAAG,MAAMvB,qBAAqB,CAACwB,kBAAtB,EAAtC;AACAF,MAAAA,QAAQ,GAAGC,yBAAyB,CAACE,IAArC;AACA,UAAIlB,MAAM,GAAG,EAAb;AACA,UAAImB,uBAAuB,GAAG,MAAMxB,WAAW,CAACyB,eAAZ,CAA4BL,QAA5B,CAApC;AACAf,MAAAA,MAAM,GAAGmB,uBAAuB,CAACD,IAAjC;AACA,WAAKG,QAAL,CAAc;AAACrB,QAAAA,MAAM,EAAEA;AAAT,OAAd;AACH;;AAEDL,IAAAA,WAAW,CAAC2B,kBAAZ,GAAiClB,IAAjC,CAAsCC,GAAG,IAAI;AACzC,WAAKgB,QAAL,CAAc;AAACpB,QAAAA,WAAW,EAAEI,GAAG,CAACa;AAAlB,OAAd;AACH,KAFD;AAGH;;AAEDK,EAAAA,gBAAgB,CAACvB,MAAD,EAAQ;AACpB,QAAGA,MAAM,IAAI,EAAb,EACI,OAAO,KAAP;AACI,QAAGA,MAAM,IAAI,EAAV,IAAiB,KAAKD,KAAL,CAAWE,WAAX,IAA0B,OAA9C,EACJ,OAAO,IAAP,CADI,KAGJ,OAAO,KAAP;AAEP;;AAEDuB,EAAAA,UAAU,GAAE;AACR,QAAG/B,qBAAqB,CAACa,cAAtB,EAAH,EACA,oBAAO;AAAI,MAAA,KAAK,EAAE;AAACmB,QAAAA,UAAU,EAAC;AAAZ,OAAX;AAAA,6BAAgC,QAAC,IAAD;AAAM,QAAA,EAAE,EAAC,YAAT;AAAsB,QAAA,EAAE,EAAC,SAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAhC;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AAEDC,EAAAA,SAAS,GAAE;AACP,QAAG,CAACjC,qBAAqB,CAACa,cAAtB,EAAJ,EACA,oBAAO;AAAI,MAAA,KAAK,EAAE;AAACmB,QAAAA,UAAU,EAAC;AAAZ,OAAX;AAAA,6BAAgC,QAAC,IAAD;AAAM,QAAA,EAAE,EAAC,YAAT;AAAsB,QAAA,EAAE,EAAC,QAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAhC;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AAEDE,EAAAA,cAAc,GAAE;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAL,CAAWC,MAAvB;AACA,QAAGP,qBAAqB,CAACa,cAAtB,MAA0C,KAAKiB,gBAAL,CAAsB,KAAKxB,KAAL,CAAWC,MAAjC,CAA7C,EACA,oBAAO;AAAI,MAAA,KAAK,EAAE;AAACyB,QAAAA,UAAU,EAAC;AAAZ,OAAX;AAAA,6BAAgC,QAAC,IAAD;AAAM,QAAA,EAAE,EAAC,YAAT;AAAsB,QAAA,EAAE,EAAC,cAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAhC;AAAA;AAAA;AAAA;AAAA,YAAP;AACH;;AAEDK,EAAAA,MAAM,GAAG;AACL,wBACI;AAAA,6BACI;AAAA,+BACA;AAAA,iCACI;AAAK,YAAA,SAAS,EAAC,gDAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,cAAf;AAAA,qCACI;AAAG,gBAAA,SAAS,EAAC,cAAb;AAA4B,gBAAA,IAAI,EAAC,GAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBADJ,eAII;AAAI,cAAA,SAAS,EAAC,KAAd;AAAA,sCACI;AAAI,gBAAA,SAAS,EAAC,QAAd;AAAA,uCAAuB,QAAC,IAAD;AAAM,kBAAA,EAAE,EAAC,YAAT;AAAsB,kBAAA,EAAE,EAAC,WAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAvB;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAI,gBAAA,KAAK,EAAE;AAACL,kBAAAA,UAAU,EAAC;AAAZ,iBAAX;AAAA,uCAAgC,QAAC,IAAD;AAAM,kBAAA,EAAE,EAAC,YAAT;AAAsB,kBAAA,EAAE,EAAC,SAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAhC;AAAA;AAAA;AAAA;AAAA,sBAFJ,eAGI;AAAI,gBAAA,KAAK,EAAE;AAACA,kBAAAA,UAAU,EAAC;AAAZ,iBAAX;AAAA,uCAAgC,QAAC,IAAD;AAAM,kBAAA,EAAE,EAAC,YAAT;AAAsB,kBAAA,EAAE,EAAC,WAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAhC;AAAA;AAAA;AAAA;AAAA,sBAHJ,EAIK,KAAKE,cAAL,EAJL,EAKK,KAAKD,SAAL,EALL,EAMK,KAAKF,UAAL,EANL,eAOI;AAAA;AAAA;AAAA;AAAA,sBAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ;AAsBH;;AA1FmC;;AA6FxC,eAAe5B,eAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport AuthenticationService from '../services/AuthenticationService';\r\nimport {\r\n    Link\r\n  } from \"react-router-dom\";\r\nimport UserService from '../services/UserService';\r\n\r\nclass HeaderComponent extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            userId: '',\r\n            currentRole: ''\r\n        }\r\n        \r\n    }\r\n\r\n    async componentDidMount(){\r\n        AuthenticationService.checkToken().then(res => {\r\n            if(res == 401 && AuthenticationService.isUserLoggedIn()){\r\n                localStorage.removeItem(\"token\");\r\n                let conf = window.confirm(\"Время вашей сессий истекло, хотите перезайти?\");\r\n                if(conf){\r\n                    window.open(\"/login\");\r\n                }\r\n                else{\r\n                    window.location.reload();\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        if(AuthenticationService.isUserLoggedIn()){\r\n            let username = '';\r\n            let getUsernameByTokenRequest = await AuthenticationService.getUsernameByToken();\r\n            username = getUsernameByTokenRequest.data;\r\n            let userId = '';\r\n            let getIdByUsernamerRequest = await UserService.getIdByUsername(username);\r\n            userId = getIdByUsernamerRequest.data;\r\n            this.setState({userId: userId});\r\n        }\r\n\r\n        UserService.getCurrentUserRole().then(res => {\r\n            this.setState({currentRole: res.data})\r\n        });\r\n    }\r\n    \r\n    isHaveFullAccess(userId){\r\n        if(userId == '')\r\n            return false;\r\n                if(userId != '' &&  this.state.currentRole == \"admin\")\r\n            return true;\r\n        else \r\n            return false;\r\n        \r\n    }\r\n\r\n    logoutLink(){\r\n        if(AuthenticationService.isUserLoggedIn())\r\n        return <li style={{marginLeft:\"10px\"}}><Link id=\"headerLink\" to=\"/logout\">Выйти</Link></li>\r\n    }\r\n\r\n    loginLink(){\r\n        if(!AuthenticationService.isUserLoggedIn())\r\n        return <li style={{marginLeft:\"10px\"}}><Link id=\"headerLink\" to=\"/login\">Войти</Link></li>\r\n    }\r\n\r\n    createUserLink(){\r\n        console.log(this.state.userId);\r\n        if(AuthenticationService.isUserLoggedIn() && this.isHaveFullAccess(this.state.userId))\r\n        return <li style={{marginLeft:\"10px\"}}><Link id=\"headerLink\" to=\"/add-user/-1\">Добавить пользователя</Link></li>;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div>\r\n                <header>\r\n                    <div className=\"navbar navgab-expand-lg navbar-dark bg-success\">\r\n                        <div className=\"navbar-inner\">\r\n                            <a className=\"navbar-brand\" href=\"/\">Онлайн журнал</a>\r\n                        </div>\r\n                        <ul className=\"nav\">\r\n                            <li className=\"active\"><Link id=\"headerLink\" to=\"/students\">Студенты</Link></li>\r\n                            <li style={{marginLeft:\"10px\"}}><Link id=\"headerLink\" to=\"/groups\">Группы</Link></li>\r\n                            <li style={{marginLeft:\"10px\"}}><Link id=\"headerLink\" to=\"/journals\">Журналы</Link></li>\r\n                            {this.createUserLink()}\r\n                            {this.loginLink()}\r\n                            {this.logoutLink()}\r\n                            <li></li>\r\n                        </ul>\r\n                    </div>\r\n                </header>\r\n            </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default HeaderComponent;"]},"metadata":{},"sourceType":"module"}