{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Arslan\\\\eclipse-workspace\\\\Journal\\\\react-frontend\\\\src\\\\components\\\\UsersListComponent.jsx\";\nimport React, { Component } from 'react';\nimport LessonLibraryService from '../services/LessonLibraryService';\nimport OpenedStudentsService from '../services/OpenedStudentsService';\nimport UserService from '../services/UserService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass UsersListComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      usernames: []\n    };\n  }\n  componentDidMount() {\n    UserService.getUsernameList().then(res => {\n      this.setState({\n        usernames: res.data\n      });\n    });\n    UserService.getRoles().then(res => {\n      this.setState({\n        roleList: res.data\n      });\n    });\n  }\n  deleteUser(event, username) {\n    event.preventDefault();\n    UserService.getIdByUsername(username).then(res => {\n      OpenedStudentsService.getOpenedStudentsByUserId(res.data).then(res1 => {\n        let openedStudents = res1.data;\n        openedStudents.map(openedStudent => {\n          OpenedStudentsService.deleteOpenedStudent(openedStudent.id);\n        });\n        LessonLibraryService.getLessonLibraryByUserId(res.data).then(res2 => {\n          let lessonLibraries = res2.data;\n          lessonLibraries.map(lessonLibrary => {\n            LessonLibraryService.deleteLesson(lessonLibrary.id);\n          });\n          UserService.removeUser(username).then(() => {\n            window.location.reload();\n          });\n        });\n      });\n    });\n  }\n  updateUser(event, username) {\n    event.preventDefault();\n    UserService.getIdByUsername(username).then(res => {\n      window.open(\"/add-user/\" + res.data);\n    });\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-center\",\n        children: \"\\u0421\\u043F\\u0438\\u0441\\u043E\\u043A \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-striped table-bordered\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"\\u0418\\u043C\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: this.state.usernames.map(username => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: e => this.deleteUser(e, username),\n                  children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 74,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: e => this.updateUser(e, username),\n                  children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 75,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 37\n              }, this)]\n            }, username, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this);\n  }\n}\nexport default UsersListComponent;","map":{"version":3,"names":["React","Component","LessonLibraryService","OpenedStudentsService","UserService","jsxDEV","_jsxDEV","UsersListComponent","constructor","props","state","usernames","componentDidMount","getUsernameList","then","res","setState","data","getRoles","roleList","deleteUser","event","username","preventDefault","getIdByUsername","getOpenedStudentsByUserId","res1","openedStudents","map","openedStudent","deleteOpenedStudent","id","getLessonLibraryByUserId","res2","lessonLibraries","lessonLibrary","deleteLesson","removeUser","window","location","reload","updateUser","open","render","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","e"],"sources":["C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/src/components/UsersListComponent.jsx"],"sourcesContent":["import React, { Component } from 'react';\r\nimport LessonLibraryService from '../services/LessonLibraryService';\r\nimport OpenedStudentsService from '../services/OpenedStudentsService';\r\nimport UserService from '../services/UserService';\r\n\r\nclass UsersListComponent extends Component {\r\n    constructor(props){\r\n        super(props)\r\n\r\n        this.state = {\r\n            usernames: []\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        UserService.getUsernameList().then(res => {\r\n            this.setState({usernames: res.data});\r\n        });\r\n        UserService.getRoles().then(res => {\r\n            this.setState({roleList: res.data});\r\n        });\r\n    }\r\n\r\n    deleteUser(event, username){\r\n        event.preventDefault();\r\n        UserService.getIdByUsername(username).then(res => {\r\n            OpenedStudentsService.getOpenedStudentsByUserId(res.data).then(res1 =>{\r\n                let openedStudents = res1.data;\r\n                openedStudents.map(openedStudent => {\r\n                    OpenedStudentsService.deleteOpenedStudent(openedStudent.id);\r\n                });\r\n\r\n                LessonLibraryService.getLessonLibraryByUserId(res.data).then(res2 => {\r\n                    let lessonLibraries = res2.data;\r\n                    lessonLibraries.map(lessonLibrary => {\r\n                        LessonLibraryService.deleteLesson(lessonLibrary.id);\r\n                    });\r\n                    \r\n\r\n                    UserService.removeUser(username).then(() => {\r\n                        window.location.reload();\r\n                    });\r\n                });\r\n                \r\n                \r\n            });\r\n        });\r\n    }\r\n\r\n    updateUser(event, username){\r\n        event.preventDefault();\r\n        UserService.getIdByUsername(username).then(res => {\r\n            window.open(\"/add-user/\" + res.data);\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h2 className=\"text-center\">Список пользователей</h2>\r\n                <div className=\"row\">\r\n                    <table className=\"table table-striped table-bordered\">\r\n                        <thead>\r\n                            <tr>\r\n                                <td>Имя</td>\r\n                                <td>Действия</td>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {\r\n                                this.state.usernames.map(username =>\r\n                                <tr key={username}>\r\n                                    <td>{username}</td>\r\n                                    <td><button onClick={(e) => this.deleteUser(e, username)}>Удалить</button></td>\r\n                                    <td><button onClick={(e) => this.updateUser(e, username)}>Изменить</button></td>\r\n                                </tr>\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default UsersListComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}