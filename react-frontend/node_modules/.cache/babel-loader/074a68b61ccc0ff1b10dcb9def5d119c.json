{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Arslan\\\\eclipse-workspace\\\\Journal\\\\react-frontend\\\\src\\\\components\\\\JournalDetailsComponent.jsx\";\nimport React, { Component } from 'react';\nimport JournalService from '../services/JournalService';\nimport GroupService from '../services/GroupService';\nimport MarkService from '../services/MarkService';\nimport LessonService from '../services/LessonService';\nimport StudentService from '../services/StudentService';\nimport AuthenticationService from '../services/AuthenticationService';\nimport UserService from '../services/UserService';\nimport OpenedStudentsService from '../services/OpenedStudentsService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass JournalDetailsComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: this.props.match.params.id,\n      journal: [],\n      groups: [],\n      marks: [],\n      lessons: [],\n      students: [],\n      sortedUsers: [],\n      sortedGroup: '',\n      journalUserId: '',\n      currentUserId: '',\n      currentRole: '',\n      currentUserOpenedStudents: [],\n      openedStudentList: []\n    };\n    this.changeDateHandler = this.changeDateHandler.bind(this);\n    this.changeMarkHandler = this.changeMarkHandler.bind(this);\n    this.changeDescriptionHandler = this.changeDescriptionHandler.bind(this);\n    this.addMarkHandler = this.addMarkHandler.bind(this);\n    this.addLessonHandler = this.addLessonHandler.bind(this);\n    this.deleteButtonHanlder = this.deleteButtonHanlder.bind(this);\n    this.closeJournal = this.closeJournal.bind(this);\n  }\n\n  async componentDidMount() {\n    GroupService.getGroups().then(res => {\n      this.setState({\n        groups: res.data\n      });\n    });\n    MarkService.getMarks().then(res => {\n      this.setState({\n        marks: res.data\n      });\n    });\n    LessonService.getLessons().then(res => {\n      this.setState({\n        lessons: res.data\n      });\n    });\n    StudentService.getStudents().then(res => {\n      this.setState({\n        students: res.data\n      });\n    });\n    let getJournalRequest = await JournalService.getJournalById(this.state.id);\n    this.setState({\n      journal: getJournalRequest.data,\n      journalUserId: getJournalRequest.data.userId\n    });\n\n    if (AuthenticationService.isUserLoggedIn()) {\n      let username = '';\n      let getUsernameByTokenRequest = await AuthenticationService.getUsernameByToken();\n      username = getUsernameByTokenRequest.data;\n      let userId = '';\n      let getIdByUsernamerRequest = await UserService.getIdByUsername(username);\n      userId = getIdByUsernamerRequest.data;\n      this.setState({\n        currentUserId: userId\n      });\n    }\n\n    UserService.getCurrentUserRole().then(res => {\n      this.setState({\n        currentRole: res.data\n      });\n    }).then(() => {\n      if (this.state.currentRole == \"Guest\") {\n        OpenedStudentsService.getOpenedStudentsByUserId(this.state.currentUserId).then(res => {\n          this.setState({\n            currentUserOpenedStudents: res.data\n          });\n          this.setState({\n            openedStudentList: this.getOpenedStudents()\n          });\n        });\n      }\n    });\n  }\n\n  isHaveFullAccess(userId) {\n    if (userId == '') return false;\n    if (userId == this.state.journalUserId || this.state.currentRole == \"Admin\") return true;else return false;\n  }\n\n  getLessonByJournal() {\n    let result = [];\n    this.state.lessons.map(lesson => {\n      if (lesson.journalId == this.state.id) {\n        result.push(lesson);\n      }\n    });\n    return result;\n  }\n\n  getMarkByJournal(markId, studentId) {\n    let result = [];\n    this.state.marks.map(mark => {\n      if (mark.journalId == markId && mark.studentId == studentId) result.push(mark);\n    });\n    return result;\n  }\n\n  getAllJournalMarks() {\n    let result = [];\n    this.state.marks.map(mark => {\n      if (mark.journalId == this.id) result.push(mark);\n    });\n    return result;\n  }\n\n  getGroupById(journalId) {\n    let result = '';\n    this.state.groups.map(group => {\n      if (group.id == journalId) result = group;\n    });\n    this.state.sortedGroup = result;\n    return result;\n  }\n\n  getStudentsNameByGroup(group) {\n    let result = [];\n    this.state.students.map(student => {\n      if (student.groupId == group.id) result.push(student);\n    });\n    this.state.sortedUsers = result;\n    return result;\n  }\n\n  changeDateHandler(event, lesson) {\n    let date = event.target.value;\n\n    if (this.isHaveFullAccess(this.state.currentUserId)) {\n      lesson.date = date;\n      LessonService.updateLesson(lesson, lesson.id);\n      this.setState({});\n    }\n  }\n\n  changeMarkHandler(event, mark) {\n    let newMark = event.target.value;\n\n    if (this.isHaveFullAccess(this.state.currentUserId)) {\n      if (isNaN(newMark) == false || newMark == \"н\" || newMark == \"нб\") {\n        mark.mark = newMark;\n\n        if (isNaN(mark.mark) == false && mark.mark != '') {\n          if (mark.mark > 5) mark.mark = 5;\n          if (mark.mark < 1) mark.mark = 1;\n        }\n\n        MarkService.updateMark(mark, mark.id);\n        this.setState({});\n      }\n    }\n  }\n\n  changeDescriptionHandler(event, lesson) {\n    if (this.isHaveFullAccess(this.state.currentUserId)) {\n      lesson.description = event.target.value;\n      LessonService.updateLesson(lesson, lesson.id);\n      this.setState({});\n    }\n  } //need to remake\n\n\n  changeTwoDescriptionHandler(event, lesson) {\n    if (this.isHaveFullAccess(this.state.currentUserId)) {\n      let lessonTwoId = event.target.value;\n      LessonService.getLessonById(lessonTwoId).then(res => {\n        let lesson2 = res.data;\n        let buffer = lesson2.description;\n        if (buffer == '') buffer = lesson.description;\n        if (lesson.description == '') lesson.description = buffer;\n        lesson2.description = lesson.description;\n        lesson.description = buffer;\n        LessonService.updateLesson(lesson, lesson.id);\n        LessonService.updateLesson(lesson2, lesson2.id);\n      });\n    }\n  }\n\n  addMarkHandler(student) {\n    if (this.isHaveFullAccess(this.state.currentUserId)) {\n      let mark = {\n        studentId: student.id,\n        lessonId: '',\n        journalId: this.state.id,\n        mark: ''\n      };\n      MarkService.createMark(mark);\n      this.setState({});\n      document.location.reload();\n    }\n  }\n\n  addLessonHandler() {\n    if (this.isHaveFullAccess(this.state.currentUserId)) {\n      let lesson = {\n        description: '',\n        date: '',\n        journalId: this.state.id\n      };\n      LessonService.createLesson(lesson).then(res => {\n        this.state.sortedUsers.map(student => {\n          let mark = {\n            studentId: student.id,\n            lessonId: res.data.id,\n            journalId: this.state.id,\n            mark: ''\n          };\n          MarkService.createMark(mark);\n        });\n        this.setState({});\n        document.location.reload();\n      });\n    }\n  }\n\n  deleteButtonHanlder() {\n    if (this.isHaveFullAccess(this.state.currentUserId)) {\n      if (window.confirm(\"Вы действительно хотите удалить журнал?\")) {\n        this.getAllJournalMarks().map(mark => {\n          MarkService.deleteMark(mark.id);\n        });\n        this.getLessonByJournal(this.state.id).map(lesson => {\n          LessonService.deleteLesson(lesson.id);\n        });\n        JournalService.deleteJournal(this.state.id);\n      }\n\n      this.props.history.push(\"/journals\");\n      window.location.reload();\n    }\n  }\n\n  showRedactButton() {\n    if (AuthenticationService.isUserLoggedIn() && this.state.id != -1 && this.isHaveFullAccess(this.state.currentUserId)) {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => this.editJournal(this.state.id),\n        children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0436\\u0443\\u0440\\u043D\\u0430\\u043B\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 20\n      }, this);\n    }\n  }\n\n  showDeleteButton() {\n    if (this.isHaveFullAccess(this.state.currentUserId)) return /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-danger\",\n      onClick: this.deleteButtonHanlder,\n      children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0436\\u0443\\u0440\\u043D\\u0430\\u043B\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 20\n    }, this);\n  }\n\n  editJournal(id) {\n    this.props.history.push(`add-journal/${id}`);\n  }\n\n  closeJournal() {\n    this.state.journal.isOpen = false;\n    JournalService.updateJournal(this.state.journal, this.state.id).then(() => {\n      window.location.reload();\n    });\n  }\n\n  showCloseJournalButton() {\n    if (AuthenticationService.isUserLoggedIn() && this.state.id != -1 && this.isHaveFullAccess(this.state.currentUserId)) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.closeJournal,\n          children: \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C \\u0436\\u0443\\u0440\\u043D\\u0430\\u043B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 20\n      }, this);\n    }\n  }\n\n  deleteLessonButtonHnadler(lessonId) {\n    LessonService.deleteLesson(lessonId);\n  }\n\n  getOpenedStudents() {\n    let sortedStudents = [];\n    this.state.students.map(student => {\n      this.state.currentUserOpenedStudents.map(openedStudent => {\n        if (openedStudent.userId == this.state.currentUserId) if (openedStudent.studentId == student.id) sortedStudents.push(student);\n      });\n    });\n    return sortedStudents;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overflow-scroll\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-center\",\n        children: \"\\u0421\\u043F\\u0438\\u0441\\u043E\\u043A \\u043E\\u0446\\u0435\\u043D\\u043E\\u043A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"py-3\",\n        children: [this.state.journal.isOpen ? this.showRedactButton() : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 72\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 21\n        }, this), this.state.journal.isOpen ? this.showCloseJournalButton() : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 78\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 21\n        }, this), this.state.journal.isOpen ? this.showDeleteButton() : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 72\n        }, this), this.state.journal.isOpen ? /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 48\n        }, this) : /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-center\",\n          children: \"\\u0416\\u0443\\u0440\\u043D\\u0430\\u043B \\u0437\\u0430\\u043A\\u0440\\u044B\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 60\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-striped table-bordered table-responsive\",\n          style: {\n            height: 450\n          },\n          children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"\\u0414\\u0430\\u0442\\u0430\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 29\n              }, this), this.getLessonByJournal().map(lesson => /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  value: lesson.date,\n                  onChange: e => {\n                    this.changeDateHandler(e, lesson);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 57\n                }, this)\n              }, lesson.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 37\n              }, this)), this.isHaveFullAccess(this.state.currentUserId) ? /*#__PURE__*/_jsxDEV(\"td\", {\n                onClick: this.addLessonHandler,\n                children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0434\\u0430\\u0442\\u0443\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 78\n              }, this) : /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 133\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: \"\\u0422\\u0435\\u043C\\u0430\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 29\n              }, this), this.getLessonByJournal().length > 0 ? this.getLessonByJournal().map(lesson => /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  onChange: e => {\n                    this.changeTwoDescriptionHandler(e, lesson);\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: lesson.id,\n                    children: lesson.description\n                  }, lesson.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 303,\n                    columnNumber: 41\n                  }, this), this.getLessonByJournal().map(les => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: les.id,\n                    children: les.description\n                  }, les.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 305,\n                    columnNumber: 45\n                  }, this))]\n                }, lesson.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 37\n                }, this)\n              }, lesson.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 37\n              }, this)) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), this.isHaveFullAccess(this.state.currentUserId) ? /*#__PURE__*/_jsxDEV(\"td\", {\n                onClick: this.addLessonHandler,\n                children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0442\\u0435\\u043C\\u0443\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 78\n              }, this) : /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 133\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                width: \"5%\",\n                children: \"\\u2116\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                width: \"25%\",\n                children: \"\\u0424\\u0418\\u041E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 25\n            }, this), this.state.currentRole != \"Guest\" ? this.getStudentsNameByGroup(this.getGroupById(this.state.journal.groupId)).map((student, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: student.firstName + \" \" + student.lastName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 41\n              }, this), this.getMarkByJournal(this.state.id, student.id).map(mark => /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: mark.mark,\n                  onChange: e => {\n                    this.changeMarkHandler(e, mark);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 67\n                }, this)\n              }, mark.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 49\n              }, this))]\n            }, student.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 37\n            }, this)) : this.state.openedStudentList.map((student, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: index + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: student.firstName + \" \" + student.lastName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 41\n              }, this), this.getMarkByJournal(this.state.id, student.id).map(mark => /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: mark.mark,\n                  onChange: e => {\n                    this.changeMarkHandler(e, mark);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 336,\n                  columnNumber: 67\n                }, this)\n              }, mark.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 49\n              }, this))]\n            }, student.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 33\n            }, this)), /*#__PURE__*/_jsxDEV(\"tr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-center\",\n          children: \"\\u043B\\u043E\\u043A\\u0430\\u043B\\u044C\\u043D\\u044B\\u0439 \\u0441\\u043F\\u0438\\u0441\\u043E\\u043A \\u0442\\u0435\\u043C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-striped table-bordered table-responsive\",\n            style: {\n              height: 450\n            },\n            children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"\\u0414\\u0430\\u0442\\u0430\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"\\u0422\\u0435\\u043C\\u0430\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 357,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 33\n              }, this), this.getLessonByJournal().map(lesson => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"date\",\n                    value: lesson.date,\n                    onChange: e => {\n                      this.changeDateHandler(e, lesson);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 363,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    value: lesson.description,\n                    onChange: e => {\n                      this.changeDescriptionHandler(e, lesson);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 364,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      this.deleteLessonButtonHnadler(lesson.id);\n                    },\n                    children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0442\\u0435\\u043C\\u0443\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 365,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 45\n                }, this)]\n              }, lesson.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 41\n              }, this)), /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [this.isHaveFullAccess(this.state.currentUserId) ? /*#__PURE__*/_jsxDEV(\"td\", {\n                  onClick: this.addLessonHandler,\n                  children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0434\\u0430\\u0442\\u0443\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 82\n                }, this) : /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 137\n                }, this), this.isHaveFullAccess(this.state.currentUserId) ? /*#__PURE__*/_jsxDEV(\"td\", {\n                  onClick: this.addLessonHandler,\n                  children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0442\\u0435\\u043C\\u0443\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 82\n                }, this) : /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 137\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default JournalDetailsComponent;","map":{"version":3,"sources":["C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/src/components/JournalDetailsComponent.jsx"],"names":["React","Component","JournalService","GroupService","MarkService","LessonService","StudentService","AuthenticationService","UserService","OpenedStudentsService","JournalDetailsComponent","constructor","props","state","id","match","params","journal","groups","marks","lessons","students","sortedUsers","sortedGroup","journalUserId","currentUserId","currentRole","currentUserOpenedStudents","openedStudentList","changeDateHandler","bind","changeMarkHandler","changeDescriptionHandler","addMarkHandler","addLessonHandler","deleteButtonHanlder","closeJournal","componentDidMount","getGroups","then","res","setState","data","getMarks","getLessons","getStudents","getJournalRequest","getJournalById","userId","isUserLoggedIn","username","getUsernameByTokenRequest","getUsernameByToken","getIdByUsernamerRequest","getIdByUsername","getCurrentUserRole","getOpenedStudentsByUserId","getOpenedStudents","isHaveFullAccess","getLessonByJournal","result","map","lesson","journalId","push","getMarkByJournal","markId","studentId","mark","getAllJournalMarks","getGroupById","group","getStudentsNameByGroup","student","groupId","event","date","target","value","updateLesson","newMark","isNaN","updateMark","description","changeTwoDescriptionHandler","lessonTwoId","getLessonById","lesson2","buffer","lessonId","createMark","document","location","reload","createLesson","window","confirm","deleteMark","deleteLesson","deleteJournal","history","showRedactButton","e","editJournal","showDeleteButton","isOpen","updateJournal","showCloseJournalButton","deleteLessonButtonHnadler","sortedStudents","openedStudent","render","height","length","les","index","firstName","lastName"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport JournalService from '../services/JournalService';\r\nimport GroupService from '../services/GroupService';\r\nimport MarkService from '../services/MarkService';\r\nimport LessonService from '../services/LessonService';\r\nimport StudentService from '../services/StudentService';\r\nimport AuthenticationService from '../services/AuthenticationService';\r\nimport UserService from '../services/UserService';\r\nimport OpenedStudentsService from '../services/OpenedStudentsService';\r\n\r\nclass JournalDetailsComponent extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            id: this.props.match.params.id,\r\n            journal:[],\r\n            groups:[],\r\n            marks:[],\r\n            lessons:[],\r\n            students:[],\r\n            sortedUsers:[],\r\n            sortedGroup: '',\r\n            journalUserId: '',\r\n            currentUserId: '',\r\n            currentRole: '',\r\n            currentUserOpenedStudents: [],\r\n            openedStudentList: []\r\n        }\r\n        this.changeDateHandler = this.changeDateHandler.bind(this);\r\n        this.changeMarkHandler = this.changeMarkHandler.bind(this);\r\n        this.changeDescriptionHandler = this.changeDescriptionHandler.bind(this);\r\n        this.addMarkHandler = this.addMarkHandler.bind(this);\r\n        this.addLessonHandler = this.addLessonHandler.bind(this);\r\n        this.deleteButtonHanlder = this.deleteButtonHanlder.bind(this);\r\n        this.closeJournal = this.closeJournal.bind(this);\r\n    }\r\n\r\n    async componentDidMount(){\r\n        GroupService.getGroups().then((res) => {\r\n            this.setState({groups: res.data});\r\n        });\r\n        MarkService.getMarks().then((res) => {\r\n            this.setState({marks: res.data});\r\n        });\r\n        LessonService.getLessons().then((res) => {\r\n            this.setState({lessons: res.data});\r\n        });\r\n        StudentService.getStudents().then((res) => {\r\n            this.setState({students: res.data});\r\n        });\r\n        let getJournalRequest = await JournalService.getJournalById(this.state.id);\r\n            this.setState({journal: getJournalRequest.data, journalUserId: getJournalRequest.data.userId});\r\n        \r\n        if(AuthenticationService.isUserLoggedIn()){\r\n            let username = '';\r\n            let getUsernameByTokenRequest = await AuthenticationService.getUsernameByToken();\r\n            username = getUsernameByTokenRequest.data;\r\n            let userId = '';\r\n            let getIdByUsernamerRequest = await UserService.getIdByUsername(username);\r\n            userId = getIdByUsernamerRequest.data;\r\n            this.setState({currentUserId: userId});\r\n        }\r\n\r\n        UserService.getCurrentUserRole().then(res => {\r\n            this.setState({currentRole: res.data})\r\n        }).then(() => {\r\n            if(this.state.currentRole == \"Guest\"){\r\n                OpenedStudentsService.getOpenedStudentsByUserId(this.state.currentUserId).then(res => {\r\n                    this.setState({currentUserOpenedStudents: res.data});\r\n                    this.setState({openedStudentList: this.getOpenedStudents()});\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    isHaveFullAccess(userId){\r\n        if(userId == '')\r\n            return false;\r\n                if(userId == this.state.journalUserId || this.state.currentRole == \"Admin\")\r\n            return true;\r\n        else \r\n            return false;\r\n        \r\n    }\r\n\r\n    getLessonByJournal(){\r\n        let result = [];\r\n        this.state.lessons.map(lesson => {\r\n            if(lesson.journalId == this.state.id){\r\n                result.push(lesson);\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n\r\n    getMarkByJournal(markId, studentId){\r\n        let result = [];\r\n        this.state.marks.map(mark => {\r\n            if(mark.journalId == markId && mark.studentId == studentId)\r\n                result.push(mark);\r\n        });\r\n        return result;\r\n    }\r\n\r\n    getAllJournalMarks(){\r\n        let result = [];\r\n        this.state.marks.map(mark => {\r\n            if(mark.journalId == this.id)\r\n                result.push(mark);\r\n        });\r\n        return result;\r\n    }\r\n\r\n    getGroupById(journalId){\r\n        let result = ''\r\n        this.state.groups.map(group => {\r\n            if(group.id == journalId)\r\n                result = group;\r\n        });\r\n        this.state.sortedGroup = result;\r\n        return result;\r\n    }\r\n\r\n    getStudentsNameByGroup(group){\r\n        let result = [];\r\n        this.state.students.map(student => {\r\n            if(student.groupId == group.id)\r\n                result.push(student);\r\n        });\r\n        this.state.sortedUsers = result;\r\n        return result;\r\n    }\r\n\r\n    changeDateHandler(event, lesson){\r\n        let date = event.target.value;\r\n        if(this.isHaveFullAccess(this.state.currentUserId)){\r\n            lesson.date = date;\r\n            LessonService.updateLesson(lesson, lesson.id);\r\n            this.setState({});\r\n        }\r\n    }\r\n\r\n    changeMarkHandler(event, mark){\r\n        let newMark = event.target.value;\r\n        if(this.isHaveFullAccess(this.state.currentUserId)){\r\n            if(isNaN(newMark) == false || newMark == \"н\" || newMark == \"нб\"){\r\n                mark.mark = newMark;\r\n                if(isNaN(mark.mark) == false && mark.mark != ''){\r\n                    if(mark.mark > 5)\r\n                        mark.mark = 5;\r\n                    if(mark.mark < 1)\r\n                        mark.mark = 1;\r\n                }\r\n                MarkService.updateMark(mark, mark.id);\r\n                this.setState({});\r\n            }\r\n        }\r\n    }\r\n\r\n    changeDescriptionHandler(event, lesson){\r\n        if(this.isHaveFullAccess(this.state.currentUserId)){\r\n            lesson.description = event.target.value;\r\n            LessonService.updateLesson(lesson, lesson.id);\r\n            this.setState({});\r\n        }\r\n    }\r\n    //need to remake\r\n    changeTwoDescriptionHandler(event, lesson){\r\n        if(this.isHaveFullAccess(this.state.currentUserId)){\r\n            let lessonTwoId = event.target.value;\r\n            LessonService.getLessonById(lessonTwoId).then(res => {\r\n                let lesson2 = res.data;\r\n                let buffer = lesson2.description;\r\n                if(buffer == '')\r\n                    buffer = lesson.description;\r\n                if(lesson.description == '')\r\n                    lesson.description = buffer;\r\n                lesson2.description = lesson.description;\r\n                lesson.description = buffer;\r\n                LessonService.updateLesson(lesson, lesson.id);\r\n                LessonService.updateLesson(lesson2, lesson2.id);\r\n            });\r\n        }\r\n    }\r\n\r\n    addMarkHandler(student){\r\n        if(this.isHaveFullAccess(this.state.currentUserId)){\r\n            let mark = {studentId: student.id, lessonId: '', journalId: this.state.id, mark:''};\r\n            MarkService.createMark(mark);\r\n            this.setState({});\r\n            document.location.reload();\r\n        }\r\n    }\r\n\r\n    addLessonHandler(){\r\n        if(this.isHaveFullAccess(this.state.currentUserId)){\r\n            let lesson = {description: '', date: '', journalId: this.state.id};\r\n            LessonService.createLesson(lesson).then(res => {\r\n                this.state.sortedUsers.map(student => {\r\n                    let mark = {studentId: student.id, lessonId: res.data.id, journalId: this.state.id, mark:''};\r\n                    MarkService.createMark(mark);\r\n                });\r\n                this.setState({});\r\n                document.location.reload();\r\n            });\r\n        }\r\n    }\r\n\r\n    deleteButtonHanlder(){\r\n        if(this.isHaveFullAccess(this.state.currentUserId)){\r\n            if(window.confirm(\"Вы действительно хотите удалить журнал?\")){\r\n                this.getAllJournalMarks().map(mark => {\r\n                    MarkService.deleteMark(mark.id);\r\n                });\r\n                this.getLessonByJournal(this.state.id).map(lesson =>{\r\n                    LessonService.deleteLesson(lesson.id);\r\n                });\r\n                JournalService.deleteJournal(this.state.id);\r\n            }\r\n            this.props.history.push(\"/journals\");\r\n            window.location.reload();\r\n        }\r\n    }\r\n\r\n    showRedactButton(){\r\n        if(AuthenticationService.isUserLoggedIn() && this.state.id != -1 && this.isHaveFullAccess(this.state.currentUserId)){\r\n            return <button onClick={(e) => this.editJournal(this.state.id)}>Изменить данные журнала</button>\r\n        }\r\n    }\r\n\r\n    showDeleteButton(){\r\n        if(this.isHaveFullAccess(this.state.currentUserId))\r\n            return <button className=\"btn btn-danger\" onClick={this.deleteButtonHanlder}>Удалить журнал</button>\r\n    }\r\n\r\n    editJournal(id){\r\n        this.props.history.push(`add-journal/${id}`);\r\n    }\r\n\r\n    closeJournal(){\r\n        this.state.journal.isOpen = false;\r\n        JournalService.updateJournal(this.state.journal, this.state.id).then(() => {\r\n            window.location.reload();\r\n        });\r\n    }\r\n\r\n    showCloseJournalButton(){\r\n        if(AuthenticationService.isUserLoggedIn() && this.state.id != -1 && this.isHaveFullAccess(this.state.currentUserId)){\r\n            return <div><button onClick={this.closeJournal}>Закрыть журнал</button></div>\r\n        }\r\n    }\r\n\r\n    deleteLessonButtonHnadler(lessonId){\r\n        LessonService.deleteLesson(lessonId);\r\n    }\r\n\r\n    getOpenedStudents(){\r\n        let sortedStudents = [];\r\n\r\n        this.state.students.map(student => {\r\n            this.state.currentUserOpenedStudents.map(openedStudent => {\r\n                if(openedStudent.userId == this.state.currentUserId)\r\n                    if(openedStudent.studentId == student.id)\r\n                        sortedStudents.push(student);\r\n            });\r\n        });\r\n        return sortedStudents;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"overflow-scroll\">\r\n                <h2 className=\"text-center\">Список оценок</h2>\r\n                <div className=\"py-3\">\r\n                    {this.state.journal.isOpen?this.showRedactButton():<div></div>}\r\n                    <div className=\"py-1\"></div>\r\n                    {this.state.journal.isOpen?this.showCloseJournalButton():<div></div>}\r\n                    <div className=\"py-1\"></div>\r\n                    {this.state.journal.isOpen?this.showDeleteButton():<div></div>}\r\n                    {this.state.journal.isOpen?<div></div>:<h4 className=\"text-center\">Журнал закрыт</h4>}\r\n                    \r\n                </div>\r\n                <div>\r\n                    <table className=\"table table-striped table-bordered table-responsive\" style={{height:450}}>\r\n                        <tbody>\r\n                        <tr>\r\n                        <td></td>\r\n                            <td>Дата</td>\r\n                            {\r\n                                this.getLessonByJournal().map(lesson => \r\n                                    <td key={lesson.id}><input type=\"date\" value={lesson.date} onChange={(e) => {this.changeDateHandler(e, lesson)}}></input></td>)\r\n                            }\r\n                            {this.isHaveFullAccess(this.state.currentUserId)?<td onClick={this.addLessonHandler}>Добавить дату</td>:<td></td>}\r\n                        </tr>\r\n                        <tr>\r\n                            <td></td>\r\n                            <td>Тема</td>\r\n                            { this.getLessonByJournal().length > 0?\r\n                                this.getLessonByJournal().map(lesson => \r\n                                    <td key={lesson.id}>\r\n                                    <select key={lesson.id} onChange={(e) => {this.changeTwoDescriptionHandler(e, lesson)}}>\r\n                                        <option key={lesson.id} value={lesson.id}>{lesson.description}</option>\r\n                                        {this.getLessonByJournal().map(les => \r\n                                            <option key={les.id} value={les.id}>{les.description}</option>\r\n                                        )}\r\n                                    </select>\r\n                                    \r\n                                    </td>\r\n                            )\r\n                            :<></>}\r\n                            {this.isHaveFullAccess(this.state.currentUserId)?<td onClick={this.addLessonHandler}>Добавить тему</td>:<td></td>}\r\n                        </tr>\r\n                        <tr>\r\n                            <td width=\"5%\">№</td>\r\n                            <td width=\"25%\">ФИО</td>\r\n                        </tr>\r\n                        {\r\n                            this.state.currentRole != \"Guest\"?\r\n                                this.getStudentsNameByGroup(this.getGroupById(this.state.journal.groupId)).map((student, index) => \r\n                                    <tr key={student.id}>\r\n                                        <td>{index + 1}</td>\r\n                                        <td>{student.firstName + \" \" + student.lastName}</td>\r\n                                        {\r\n                                            this.getMarkByJournal(this.state.id, student.id).map(mark => \r\n                                                <td key={mark.id}><input value={mark.mark} onChange={(e) => {this.changeMarkHandler(e, mark)}}></input></td>)\r\n                                        }\r\n                                    </tr>\r\n                                )\r\n                            : this.state.openedStudentList.map((student, index) => \r\n                                <tr key={student.id}>\r\n                                        <td>{index + 1}</td>\r\n                                        <td>{student.firstName + \" \" + student.lastName}</td>\r\n                                        {\r\n                                            this.getMarkByJournal(this.state.id, student.id).map(mark => \r\n                                                <td key={mark.id}><input value={mark.mark} onChange={(e) => {this.changeMarkHandler(e, mark)}}></input></td>)\r\n                                        }\r\n                                    </tr>\r\n                            )\r\n                        }\r\n                            \r\n                        <tr>\r\n                            \r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n                <div>\r\n                    <h2 className=\"text-center\">локальный список тем</h2>\r\n\r\n                    <div>\r\n                        <table className=\"table table-striped table-bordered table-responsive\" style={{height:450}}>\r\n                            <tbody>\r\n                                <tr>\r\n                                    <td>Дата</td>\r\n                                    <td>Тема</td>\r\n                                    <td>Действия</td>\r\n                                </tr>\r\n                                {\r\n                                    this.getLessonByJournal().map(lesson => \r\n                                        <tr key={lesson.id}>\r\n                                            <td><input type=\"date\" value={lesson.date} onChange={(e) => {this.changeDateHandler(e, lesson)}}></input></td>\r\n                                            <td><input value={lesson.description} onChange={(e) => {this.changeDescriptionHandler(e, lesson)}}></input></td>\r\n                                            <td><button onClick={() => {this.deleteLessonButtonHnadler(lesson.id)}}>Удалить тему</button></td>\r\n                                        </tr>    \r\n                                    )\r\n                                }\r\n                                <tr>\r\n                                {this.isHaveFullAccess(this.state.currentUserId)?<td onClick={this.addLessonHandler}>Добавить дату</td>:<td></td>}\r\n                                {this.isHaveFullAccess(this.state.currentUserId)?<td onClick={this.addLessonHandler}>Добавить тему</td>:<td></td>}\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default JournalDetailsComponent;"]},"metadata":{},"sourceType":"module"}