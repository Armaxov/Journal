{"ast":null,"code":"import _classCallCheck from\"C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import AuthenticationService from'../services/AuthenticationService';import GroupService from'../services/GroupService';import StudentService from'../services/StudentService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateStudentComponent=/*#__PURE__*/function(_Component){_inherits(CreateStudentComponent,_Component);var _super=_createSuper(CreateStudentComponent);function CreateStudentComponent(props){var _this;_classCallCheck(this,CreateStudentComponent);_this=_super.call(this,props);_this.saveOrUpdateStudent=function(e){e.preventDefault();if(_this.state.firstName==''||_this.state.lastName==''){_this.setState({incorrectData:true});return;}var student={firstName:_this.state.firstName,lastName:_this.state.lastName,groupId:_this.state.groupId};if(_this.state.id==-1){StudentService.createStudent(student).then(function(res){_this.props.history.push(\"/students\");});}else{StudentService.updateStudent(student,_this.state.id).then(function(res){_this.props.history.push(\"/students\");});}};_this.changeFirstNameHandler=function(event){var firstName=event.target.value;_this.setState({firstName:firstName});if(firstName.length==0)_this.setState({incorrectStudentFirstName:true});else _this.setState({incorrectStudentFirstName:false});};_this.changeLastNameHandler=function(event){var lastName=event.target.value;_this.setState({lastName:lastName});if(lastName.length==0)_this.setState({incorrectStudentLastName:true});else _this.setState({incorrectStudentLastName:false});};_this.changeGroupHandler=function(event){var newId=_this.getGroupIdByName(event.target.value);_this.setState({groupId:newId});};_this.state={id:_this.props.match.params.id,firstName:'',lastName:'',groupId:'',groups:[],incorrectStudentFirstName:false,incorrectStudentLastName:false,incorrectData:false};_this.changeFirstNameHandler=_this.changeFirstNameHandler.bind(_assertThisInitialized(_this));_this.changeLastNameHandler=_this.changeLastNameHandler.bind(_assertThisInitialized(_this));_this.changeGroupHandler=_this.changeGroupHandler.bind(_assertThisInitialized(_this));_this.incorrectStudentFirstNameMessage=_this.incorrectStudentFirstNameMessage.bind(_assertThisInitialized(_this));_this.incorrectStudentLastNameMessage=_this.incorrectStudentLastNameMessage.bind(_assertThisInitialized(_this));_this.incorrectDataMessage=_this.incorrectDataMessage.bind(_assertThisInitialized(_this));return _this;}_createClass(CreateStudentComponent,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;GroupService.getGroups().then(function(res){_this2.setState({groups:res.data,groupId:res.data[0].id});});if(this.state.id==-1){return;}else{StudentService.getStudentsById(this.state.id).then(function(res){var student=res.data;_this2.setState({firstName:student.firstName,lastName:student.lastName,groupId:student.groupId});});}}},{key:\"getTitle\",value:function getTitle(){if(this.state.id==-1){return/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u043E\\u0433\\u043E \\u0441\\u0442\\u0443\\u0434\\u0435\\u043D\\u0442\\u0430\"});}else{return/*#__PURE__*/_jsx(\"h3\",{className:\"text-center\",children:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043E\\u0431 \\u0441\\u0442\\u0443\\u0434\\u0435\\u043D\\u0442\\u0435\"});}}},{key:\"cancel\",value:function cancel(){this.props.history.push('/students');}},{key:\"getGroupIdByName\",value:function getGroupIdByName(name){var currentGroup='';this.state.groups.forEach(function(group){if(group.groupName==name){currentGroup=group.id;}});return currentGroup;}},{key:\"getGroupList\",value:function getGroupList(){var groups=[];this.state.groups.forEach(function(group){groups.push(/*#__PURE__*/_jsx(\"option\",{value:group.groupName,children:group.groupName},group.id));});return groups;}},{key:\"deleteStudent\",value:function deleteStudent(){this.props.history.push(\"/students\");StudentService.deleteStudent(this.state.id);window.location.reload();}},{key:\"getDeleteButton\",value:function getDeleteButton(){var _this3=this;if(this.state.id!=-1){return/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:\"10px\"},onClick:function onClick(){_this3.deleteStudent();},className:\"btn btn-danger\",children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"});}}},{key:\"incorrectStudentFirstNameMessage\",value:function incorrectStudentFirstNameMessage(){if(this.state.incorrectStudentFirstName)return/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",style:{backgroundColor:\"RGBA(250, 0, 0,.7)\",borderRadius:6},children:/*#__PURE__*/_jsx(\"label\",{style:{marginLeft:12},children:\"\\u041D\\u0435\\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u043E\\u0435 \\u0438\\u043C\\u044F\"})});}},{key:\"incorrectStudentLastNameMessage\",value:function incorrectStudentLastNameMessage(){if(this.state.incorrectStudentLastName)return/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",style:{backgroundColor:\"RGBA(250, 0, 0,.7)\",borderRadius:6},children:/*#__PURE__*/_jsx(\"label\",{style:{marginLeft:12},children:\"\\u041D\\u0435\\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u0430\\u044F \\u0444\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\"})});}},{key:\"incorrectDataMessage\",value:function incorrectDataMessage(){if(this.state.incorrectData)return/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",style:{backgroundColor:\"RGBA(250, 0, 0,.7)\",borderRadius:6},children:/*#__PURE__*/_jsx(\"label\",{style:{marginLeft:12},children:\"\\u041D\\u0435\\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u0430\\u044F \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F \\u043E \\u0441\\u0442\\u0443\\u0434\\u0435\\u043D\\u0442\\u0435\"})});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card col-md-6 offset-md-3 offset-md-3\",children:[this.getTitle(),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{children:[this.incorrectDataMessage(),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u0418\\u043C\\u044F\",name:\"firstName\",className:\"form-control\",value:this.state.firstName,onChange:this.changeFirstNameHandler}),/*#__PURE__*/_jsx(\"label\",{}),this.incorrectStudentFirstNameMessage()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\",name:\"lastName\",className:\"form-control\",value:this.state.lastName,onChange:this.changeLastNameHandler}),/*#__PURE__*/_jsx(\"label\",{}),this.incorrectStudentLastNameMessage()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0413\\u0440\\u0443\\u043F\\u043F\\u0430\"}),/*#__PURE__*/_jsx(\"select\",{name:\"group\",className:\"form-control\",onChange:this.changeGroupHandler,children:this.getGroupList()}),/*#__PURE__*/_jsx(\"label\",{})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:this.saveOrUpdateStudent,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:this.cancel.bind(this),style:{marginLeft:\"10px\"},children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),this.getDeleteButton()]})})]})})})});}}]);return CreateStudentComponent;}(Component);export default CreateStudentComponent;","map":{"version":3,"sources":["C:/Users/Arslan/eclipse-workspace/Journal/react-frontend/src/components/CreateStudentComponent.jsx"],"names":["React","Component","AuthenticationService","GroupService","StudentService","CreateStudentComponent","props","saveOrUpdateStudent","e","preventDefault","state","firstName","lastName","setState","incorrectData","student","groupId","id","createStudent","then","res","history","push","updateStudent","changeFirstNameHandler","event","target","value","length","incorrectStudentFirstName","changeLastNameHandler","incorrectStudentLastName","changeGroupHandler","newId","getGroupIdByName","match","params","groups","bind","incorrectStudentFirstNameMessage","incorrectStudentLastNameMessage","incorrectDataMessage","getGroups","data","getStudentsById","name","currentGroup","forEach","group","groupName","deleteStudent","window","location","reload","marginLeft","backgroundColor","borderRadius","getTitle","getGroupList","cancel","getDeleteButton"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport AuthenticationService from '../services/AuthenticationService';\r\nimport GroupService from '../services/GroupService';\r\nimport StudentService from '../services/StudentService';\r\n\r\nclass CreateStudentComponent extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            id: this.props.match.params.id,\r\n            firstName: '',\r\n            lastName: '',\r\n            groupId: '',\r\n            groups: [],\r\n            incorrectStudentFirstName: false,\r\n            incorrectStudentLastName: false,\r\n            incorrectData: false\r\n        }\r\n\r\n\r\n        this.changeFirstNameHandler = this.changeFirstNameHandler.bind(this);\r\n        this.changeLastNameHandler = this.changeLastNameHandler.bind(this);\r\n        this.changeGroupHandler = this.changeGroupHandler.bind(this);\r\n        this.incorrectStudentFirstNameMessage = this.incorrectStudentFirstNameMessage.bind(this);\r\n        this.incorrectStudentLastNameMessage = this.incorrectStudentLastNameMessage.bind(this);\r\n        this.incorrectDataMessage = this.incorrectDataMessage.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        GroupService.getGroups().then(res => {\r\n            this.setState({groups: res.data,\r\n                groupId: res.data[0].id});\r\n        });\r\n\r\n        if(this.state.id == -1){\r\n            return\r\n        }\r\n        else{\r\n            StudentService.getStudentsById(this.state.id).then((res) => {\r\n                let student = res.data;\r\n                this.setState({\r\n                    firstName: student.firstName,\r\n                    lastName: student.lastName,\r\n                    groupId: student.groupId\r\n                });\r\n            });\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    saveOrUpdateStudent = e =>{\r\n        e.preventDefault();\r\n        if(this.state.firstName == '' || this.state.lastName == ''){\r\n            this.setState({incorrectData: true});\r\n            return;\r\n        }\r\n        let student = {\r\n            firstName: this.state.firstName, \r\n            lastName: this.state.lastName, \r\n            groupId: this.state.groupId}\r\n        if(this.state.id == -1){\r\n            StudentService.createStudent(student).then(res =>{\r\n                this.props.history.push(\"/students\");\r\n            });\r\n        }\r\n        else{\r\n            StudentService.updateStudent(student, this.state.id).then(res => {\r\n                this.props.history.push(\"/students\");\r\n            });\r\n        }\r\n    }\r\n\r\n    changeFirstNameHandler = (event) =>{\r\n        let firstName = event.target.value;\r\n        this.setState({firstName: firstName});\r\n        if(firstName.length == 0)\r\n            this.setState({incorrectStudentFirstName: true});\r\n        else\r\n            this.setState({incorrectStudentFirstName: false});\r\n    }\r\n\r\n    changeLastNameHandler = (event) =>{\r\n        let lastName = event.target.value;\r\n        this.setState({lastName: lastName});\r\n        if(lastName.length == 0)\r\n            this.setState({incorrectStudentLastName: true});\r\n        else\r\n            this.setState({incorrectStudentLastName: false});\r\n    }\r\n\r\n    changeGroupHandler = (event) =>{\r\n        let newId = this.getGroupIdByName(event.target.value);\r\n        this.setState({groupId: newId});\r\n    }\r\n\r\n    getTitle(){\r\n        if(this.state.id == -1){\r\n            return <h3 className=\"text-center\">Добавить нового студента</h3>\r\n        }\r\n        else{\r\n            return <h3 className=\"text-center\">Обновить данные об студенте</h3>\r\n        } \r\n    }\r\n\r\n    cancel(){\r\n        this.props.history.push('/students');\r\n    }\r\n\r\n    getGroupIdByName(name){\r\n        let currentGroup = '';\r\n        this.state.groups.forEach((group) => {\r\n            if(group.groupName == name){\r\n                currentGroup = group.id;\r\n            }\r\n        });\r\n        return currentGroup;\r\n    }\r\n\r\n    getGroupList(){\r\n        let groups = [];\r\n        this.state.groups.forEach((group) => {\r\n            groups.push(<option key={group.id} value={group.groupName}>{group.groupName}</option>);\r\n        });\r\n        return groups;\r\n    }\r\n\r\n    deleteStudent(){\r\n        this.props.history.push(\"/students\");\r\n        StudentService.deleteStudent(this.state.id);\r\n        window.location.reload();\r\n    }\r\n\r\n    getDeleteButton(){\r\n        if(this.state.id != -1){\r\n            return  <button style = {{marginLeft:\"10px\"}} onClick={() => {this.deleteStudent()}} className=\"btn btn-danger\">Удалить</button>\r\n        }\r\n    }\r\n\r\n    incorrectStudentFirstNameMessage(){\r\n        if(this.state.incorrectStudentFirstName)\r\n            return <div className=\"form-group\"  style={{backgroundColor:\"RGBA(250, 0, 0,.7)\", borderRadius:6}}><label style={{marginLeft:12}}>Некорректное имя</label></div>\r\n    }\r\n\r\n    incorrectStudentLastNameMessage(){\r\n        if(this.state.incorrectStudentLastName)\r\n            return <div className=\"form-group\"  style={{backgroundColor:\"RGBA(250, 0, 0,.7)\", borderRadius:6}}><label style={{marginLeft:12}}>Некорректная фамилия</label></div>\r\n    }\r\n\r\n    incorrectDataMessage(){\r\n        if(this.state.incorrectData)\r\n        return <div className=\"form-group\"  style={{backgroundColor:\"RGBA(250, 0, 0,.7)\", borderRadius:6}}><label style={{marginLeft:12}}>Некорректная информация о студенте</label></div>\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"container\">\r\n                    <div className=\"row\">\r\n                        <div className=\"card col-md-6 offset-md-3 offset-md-3\">\r\n                            {this.getTitle()}\r\n                            <div className=\"card-body\">\r\n                                <form>\r\n                                    {this.incorrectDataMessage()}\r\n                                    <div className=\"form-group\">\r\n                                        <label>Имя</label>\r\n                                        <input placeholder=\"Имя\" name=\"firstName\" className=\"form-control\"\r\n                                        value={this.state.firstName} onChange={this.changeFirstNameHandler}/>\r\n                                        <label></label>\r\n                                        {this.incorrectStudentFirstNameMessage()}\r\n                                    </div>\r\n\r\n                                    <div className=\"form-group\">\r\n                                        <label>Фамилия</label>\r\n                                        <input placeholder=\"Фамилия\" name=\"lastName\" className=\"form-control\"\r\n                                        value={this.state.lastName} onChange={this.changeLastNameHandler}/>\r\n                                        <label></label>\r\n                                        {this.incorrectStudentLastNameMessage()}\r\n                                    </div>\r\n\r\n\r\n                                    <div className=\"form-group\">\r\n                                        <label>Группа</label>\r\n                                        <select name=\"group\" className=\"form-control\" onChange={this.changeGroupHandler}>\r\n                                            {this.getGroupList()}\r\n                                        </select>\r\n                                        <label></label>\r\n                                    </div>\r\n\r\n                                    <button className=\"btn btn-success\" onClick={this.saveOrUpdateStudent}>Сохранить</button>\r\n                                    <button className=\"btn btn-danger\" onClick={this.cancel.bind(this)} style={{marginLeft: \"10px\"}}>Отмена</button>\r\n                                    {this.getDeleteButton()}\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default CreateStudentComponent;"]},"metadata":{},"sourceType":"module"}